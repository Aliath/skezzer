{"version":3,"file":"index.js","sources":["../../src/utils/Store.ts","../../src/Core/Renderer.ts","../../src/Core/Loader.ts","../../src/index.ts"],"sourcesContent":["export class Store {\r\n  components = {};\r\n  eventHandlers = {};\r\n  state = {};\r\n\r\n  set = (newState: {[key: string]: any}) => {\r\n      this.state = { ...this.state, ...newState };\r\n  };\r\n\r\n  get = (key: string) => {\r\n      let result = this.state;\r\n\r\n      if (key) {\r\n          result = this.state[key];\r\n      }\r\n\r\n      if (typeof result === 'object') return { ...result };\r\n      return result;\r\n  }\r\n\r\n  on  = (name: string, handler: (payload: any) => void) => {\r\n      if (!this.eventHandlers.hasOwnProperty(name)) {\r\n          this.eventHandlers[name] = [handler];\r\n          return;\r\n      }\r\n\r\n      if (this.eventHandlers[name].includes(handler)) {\r\n          throw new Error(`Store.on(): This handler has been already registered!`);\r\n      }\r\n\r\n      this.eventHandlers[name].push(handler);\r\n  };\r\n\r\n  off = (name: string, handler: (payload: any) => void) => {\r\n      if (!this.eventHandlers.hasOwnProperty(name)) {\r\n          throw new Error(`Store.off(): Trying to remove handler from unknown type: ${name}!`);\r\n      }\r\n\r\n      if (!this.eventHandlers[name].includes(handler)) {\r\n          throw new Error(`Store.off(): Trying to remove unknown handler!`);\r\n      }\r\n\r\n      this.eventHandlers[name].splice(\r\n          this.eventHandlers[name].indexOf(handler),\r\n          1\r\n      );\r\n  }\r\n\r\n  emit = (name: string, payload: any) => {\r\n      if (!this.eventHandlers.hasOwnProperty(name)) {\r\n          console.warn(`Store.emit(): Any handler for event ${name} does not exists!`);\r\n          return;\r\n      }\r\n\r\n      this.eventHandlers[name].forEach((handler: (payload: any) => void) => {\r\n          handler(payload);\r\n      });\r\n  };\r\n\r\n  registerComponent = (name: string, value: any) => {\r\n      if (this.components.hasOwnProperty(name)) {\r\n          throw new Error(`Store.register(): Component \"${name}\" is already registered!`);\r\n      }\r\n\r\n      this.components[name] = value;\r\n  };\r\n\r\n  getComponent = (name: string) => {\r\n      if (Array.isArray(name)) {\r\n          return name.map(component => this.get(component));\r\n      }\r\n\r\n      if (!this.components.hasOwnProperty(name)) {\r\n          throw new Error(`Store.get(): Component ${name} is not registered!`);\r\n      }\r\n\r\n      return this.components[name];\r\n  };\r\n}","import { Drawable } from \"../utils\";\r\n\r\nexport interface CanvasSize {\r\n  width: number,\r\n  height: number,\r\n}\r\n\r\nexport class Renderer {\r\n  canvas: HTMLCanvasElement;\r\n  context: CanvasRenderingContext2D;\r\n  drawableList: Drawable[] = [\r\n    { x: 50, y: 50, width: 100, height: 100, backgroundColor: 'red' }\r\n  ];\r\n\r\n  constructor() {\r\n    this._createCanvas();\r\n    this._bindResizeEvents();\r\n    this._fitCanvasToWindow();\r\n\r\n    this._moveRect();\r\n  }\r\n\r\n  render = () => {\r\n    requestAnimationFrame(this.render);\r\n\r\n    this.context.clearRect(0, 0, window.innerWidth, window.innerHeight);\r\n\r\n    for (let { x, y, width, height, backgroundColor, image, zIndex, click } of this.drawableList) {\r\n      if  (!backgroundColor && !image) {\r\n        console.error('Renderer.render(): There is nothing to render, ignoring...');\r\n        continue;\r\n      }\r\n\r\n      if (backgroundColor) {\r\n        this.context.fillStyle = backgroundColor;\r\n        this.context.fillRect(x, y, width, height);\r\n      }\r\n    }\r\n  }\r\n\r\n  private _moveRect = () => {\r\n    // :D\r\n    setInterval(() => {\r\n      const random = Math.random();\r\n      const value = Math.random() >= .5 ? 10 : -10;\r\n\r\n      if (random < .25) {\r\n        this.drawableList[0].x += value;\r\n      } else if (random < .5) {\r\n        this.drawableList[0].y += value;\r\n      } else if (random < .75) {\r\n        this.drawableList[0].width += value;\r\n      } else {\r\n        this.drawableList[0].height += value;\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  private _bindResizeEvents = () => {\r\n    const EVENT_NAMES = ['resize'];\r\n\r\n    EVENT_NAMES.forEach((eventName: string) => {\r\n      window.addEventListener(eventName, this._fitCanvasToWindow, false);\r\n    });\r\n  }\r\n\r\n  private _fitCanvasToWindow = () => {\r\n    this._resizeCanvas({\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n    });\r\n  }\r\n\r\n  private _resizeCanvas = ({ width, height }: CanvasSize) => {\r\n    Object.assign(this.canvas, { width, height });\r\n  }\r\n\r\n  private _createCanvas = () => {\r\n    const canvas = document.createElement('canvas');\r\n    const context = canvas.getContext('2d');\r\n\r\n    document.body.appendChild(canvas);\r\n    Object.assign(this, { canvas, context });\r\n  }\r\n}","export class Loader {\r\n  ref: HTMLElement;\r\n\r\n  constructor() {\r\n    this.ref = document.getElementById('loader');\r\n  }\r\n\r\n  hide = () => {\r\n    this.ref.classList.add('loader--hidden');\r\n  }\r\n\r\n  show = () => {\r\n    this.ref.classList.remove('loader-hidden');\r\n  }\r\n}","import { Store } from './utils/';\r\nimport { Renderer, Loader } from './Core/';\r\n\r\nclass Game {\r\n  components: { [key: string]: any } = { Renderer, Loader };\r\n  store: Store = new Store();\r\n\r\n  constructor() {\r\n    this.registerComponents();\r\n\r\n    this.store.getComponent('Loader').hide();\r\n    this.store.getComponent('Renderer').render();\r\n  }\r\n\r\n  registerComponents = () => {\r\n    Object.entries(this.components).forEach(([name, Component]) => {\r\n      this.store.registerComponent(name, new Component(this.store));\r\n    })\r\n  };\r\n}\r\n\r\nconst game = new Game();"],"names":[],"mappings":"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"}